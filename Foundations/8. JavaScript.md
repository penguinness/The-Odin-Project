# 8. JavaScript

## Variables

Variables in JS can be declared using `let` or `const` (for constants):

```JS
let message;

message = 'Hello!';

message = 'World!'; // value changed

alert(message);
```

```JS
let user = 'John', age = 25, message = 'Hello';
```

```JS
const myBirthday = '18.04.1982';

myBirthday = '01.01.2001'; // error, can't reassign the constant!
```

```JS
const COLOR_RED = "#F00";
const COLOR_GREEN = "#0F0";
const COLOR_BLUE = "#00F";
const COLOR_ORANGE = "#FF7F00";

// ...when we need to pick a color
let color = COLOR_ORANGE;
alert(color); // #FF7F00
```

Some naming conventions:

- Use camelCase

- Use human-readable names (e.g. use `userName` instead of `a`)

## Numbers

- Arithmetic operators: `+` (addition), `-` (subtraction), `*` (multiplication), `/` (division), `%` (modulo), `**` (exponent)

- Increment and decrement operators: `++` (increment), `--` (decrement)

- Assignment operators: `=` (assignment), `+=` (addition assignment), `-=` (subtraction assignment), `*=` (multiplication assignment), `/=` (division assignment)

- Comparison operators: `==` (equality), `!=` (inequality), `===` (strict equality), `!==` (strict inequality), `<` (less than), `>` (greater than), `<=` (less than or equal to), `>=` (greater than or equal to)

- Useful methods: `toFixed()` (rounding)

- Special values: `Infinity`, `NaN`

## Data Types and Conditionals

- Data types:

  - Primitive: `number`, `bigint`, `string`, `boolean`, `null`, `undefined`, `symbol`

  - Non-primitive: `object`

- `typeof` returns the type of the operand. `type of undefined` returns `"undefined"`. `typeof null` returns `"object"` (this is an error).

- Logical operators: `||` (OR), `&&` (AND), `!` (NOT)

- If/else statements:

```JS
if (condition) {
  /* code to run if condition is true */
} else if{
  /* run some other code instead */
} else {
  /* run some other code instead */
}
```

- Switch statements:

```JS
switch (expression) {
  case choice1:
    // run this code
    break;

  case choice2:
    // run this code instead
    break;

  // include as many cases as you like

  default:
    // actually, just run this code
    break;
}
```

- Ternary operator:

```JS
condition ? trueExpression : falseExpression
```

- Falsy values: `0`, `""`, `null`, `undefined`, `NaN`

## Chrome DevTools

- To open DevTools, use `option` + `command` + `C`. To open console, use `option` + `command` + `J`.

- **Device mode** can be used to simulate websites on other devices.

- To find where bugs are in your code, use **breakpoints**. [This doc](https://developer.chrome.com/docs/devtools/javascript/breakpoints) sums up every type of breakpoints in DevTools.

- To test functions, use `console.log()`. To clear the console, use `console.clear()`.

## Functions

A function takes in parameters and produces outputs. When you make a function call, the inputs are called arguments.

![alt text](../Images/image-18.png)

```JS
let func = function(param1, param2, ..., paramN) {
  return expression;
};
```

A function may neither have parameters nor return a value (i.e. simply execute a task):

```JS
function sayHello(){
  alert("Hello!");
}
```

A very efficient way to write functions is by using arrow functions:

```JS
let func = (arg1, arg2, ..., argN) => expression;
```

```JS
let sum = (a, b) => a + b;

/* This arrow function is a shorter form of:

let sum = function(a, b) {
  return a + b;
};
*/

alert( sum(1, 2) ); // 3
```

It is highly recommended to use clear and descriptive names for your functions (e.g. `getAge()` instead of `$()`).

## Problem Solving and Understanding Errors

Here are three recommended steps to solve programming problems:

1. Plan:
   Use comments to write down the necessary requirements to solve the problem (i.e. dissect the problem statement).

2. Pseudocode
   Write a legible pseudocode of how the program should work.

3. Divide and conquer
   Solve each subproblem (i.e. step) one by one.

Here are the common types of errors in JS:

1. [Syntax errors](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/SyntaxError)

2. [Reference errors](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/ReferenceError)

3. [Type errors](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypeError)

   Type errors happen when

   - an operand or argument passed to a function is incompatible with the type expected by that operator or function;

   - or when attempting to modify a value that cannot be changed;

   - or when attempting to use a value in an inappropriate way.

4. Logic errors

## Arrays and Loops

Some (potentially) important array methods:

- Add an element to the end of an array: `push()`

- Convert an array into a string: `toString()`

- Sort an array: `sort()`

There are 4 types of loops:

- for...of:

  ```JS
  for (const item of array) {
    // code to run
  }
  ```

- for:

  ```JS
  for (initializer; condition; final-expression) {
  // code to run
  }
  ```

- while:

  ```JS
  initializer
  while (condition) {
    // code to run

    final-expression
  }
  ```

- do...while:

  ```JS
  initializer
  do {
    // code to run

    final-expression
  } while (condition)
  ```

Some notes:

- `break` breaks a loop completely. `continue` skips to the next iteration of the loop.

- To `break` an outer loop, use a label:

  ```JS
  label: {
    // ...
    break label; // works
    // ...
  }
  ```

## DOM Manipulation and Events

The Document Object Model (DOM) is a tree-oriented representation of a webpage.

For example, the below code shows a DOM tree with "container" being the **parent** of its **children** nodes "display" and "controls".

```HTML
<div id="container">
  <div class="display"></div>
  <div class="controls"></div>
</div>
```

There are two ways to target nodes in the DOM model:

1. CSS selectors:

   To select `<div class="display"></div>`, we can write:

   - div.display
   - .display
   - #container > .display
   - div#container > div.display

2. Relational selectors:

   ```JS
   // selects the #container div
   const container = document.querySelector("#container");

   // selects the first child of #container => .display
   console.dir(container.firstElementChild);

   // selects the .controls div
   const controls = document.querySelector(".controls");

   // selects the prior sibling => .display
   console.dir(controls.previousElementSibling);
   ```

Here are some DOM methods:

1. Query selectors:

   - `element.querySelector(selector)` returns a reference to the first match of _selector_.

   - `element.querySelectorAll(selectors)` returns a NodeList containing references to all the matches of the _selectors_.

2. Element creation:

   `document.createElement(tagName, [options])` creates a new element of tag type tagName.

   ```JS
   const div = document.createElement("div");
   ```

3. Append elements:

   - `parentNode.appendChild(childNode)` appends _childNode_ as the last child of _parentNode_.

   - `parentNode.insertBefore(newNode, referenceNode)` inserts _newNode_ into _parentNode_ before _referenceNode_.

4. Remove elements:

   - `parentNode.removeChild(child)` removes child from _parentNode_ on the DOM and returns a reference to _child_.

5. Altering elements:

   ```JS
   // creates a new div referenced in the variable 'div'
   const div = document.createElement("div");
   ```

6. Adding inline style:

   ```JS
   // adds the indicated style rule to the element in the div variable
   div.style.color = "blue";

   // adds several style rules
   div.style.cssText = "color: blue; background: white;";

   // adds several style rules
   div.setAttribute("style", "color: blue; background: white;");
   ```

   ```JS
   // dot notation with kebab-case: doesn't work as it attempts to subtract color from div.style.background
   // equivalent to: div.style.background - color
   div.style.background-color;

   // dot notation with camelCase: works, accesses the div's background-color style
   div.style.backgroundColor;

   // bracket notation with kebab-case: also works
   div.style["background-color"];

   // bracket notation with camelCase: also works
   div.style["backgroundColor"];
   ```

7. Editing attributes

   ```JS
   // if id exists, update it to 'theDiv', else create an id with value "theDiv"
   div.setAttribute("id", "theDiv");

   // returns value of specified attribute, in this case "theDiv"
   div.getAttribute("id");

   // removes specified attribute
   div.removeAttribute("id");
   ```

8. Working with classes:

   ```JS
   // adds class "new" to your new div
   div.classList.add("new");

   // removes "new" class from div
   div.classList.remove("new");

   // if div doesn't have class "active" then add it, or if it does, then remove it
   div.classList.toggle("active");
   ```

9. Adding text content:

   ```JS
   // creates a text node containing "Hello World!" and inserts it in div
   div.textContent = "Hello World!";
   ```

10. Adding HTML content:

    ```JS
    // renders the HTML inside div
    div.innerHTML = "<span>Hello World!</span>";

    // Note: textContent is preferred over innerHTML
    ```
